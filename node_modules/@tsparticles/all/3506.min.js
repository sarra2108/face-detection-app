/*! For license information please see 3506.min.js.LICENSE.txt */
(this.webpackChunk_tsparticles_all=this.webpackChunk_tsparticles_all||[]).push([[3506],{3506:(t,e,i)=>{i.d(e,{PolygonMaskInstance:()=>l});var n=i(5540),s=i(7246);const a=`${n.dI} No polygon data loaded.`,o=`${n.dI} No polygon found, you need to specify SVG url in config.`,h=0,r=0,c=.5;class l{constructor(t,e){this._checkInsidePolygon=t=>{const e=this._container,i=e.actualOptions.polygon;if(!i?.enable||"none"===i.type||"inline"===i.type)return!0;if(!this.raw)throw new Error(o);const s=e.canvas.size,a=t?.x??(0,n.G0)()*s.width,h=t?.y??(0,n.G0)()*s.height;let r=!1;for(let t=0,e=this.raw.length-1;t<this.raw.length;e=t++){const i=this.raw[t],n=this.raw[e];i.y>h!=n.y>h&&a<(n.x-i.x)*(h-i.y)/(n.y-i.y)+i.x&&(r=!r)}return"inside"===i.type?r:"outside"===i.type&&!r},this._createPath2D=()=>{if(this._container.actualOptions.polygon&&this.paths?.length)for(const t of this.paths){const e=t.element?.getAttribute("d");if(e){const i=new Path2D(e),n=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),s=new Path2D,a=n.scale(this._scale);s.addPath?(s.addPath(i,a),t.path2d=s):delete t.path2d}else delete t.path2d;if(t.path2d??!this.raw)continue;t.path2d=new Path2D;const i=0,n=this.raw[i];t.path2d.moveTo(n.x,n.y),this.raw.forEach(((e,n)=>{n>i&&t.path2d?.lineTo(e.x,e.y)})),t.path2d.closePath()}},this._downloadSvgPath=async(t,e)=>{const i=this._container.actualOptions.polygon;if(!i)return;const s=t??i.url,a=e??!1;if(!s||void 0!==this.paths&&!a)return this.raw;const o=await fetch(s);if(!o.ok)throw new Error(`${n.dI} occurred during polygon mask download`);return await this._parseSvgPath(await o.text(),e)},this._drawPoints=()=>{if(this.raw)for(const t of this.raw)this._container.particles.addParticle({x:t.x,y:t.y})},this._getEquidistantPointByIndex=t=>{const e=this._container.actualOptions;if(!e.polygon)return;if(!this.raw?.length||!this.paths?.length)throw new Error(a);let i,n=0;const s=this.paths.reduce(((t,e)=>t+e.length),0)/e.particles.number.value;for(const e of this.paths){const a=s*t-n;if(a<=e.length){i=e.element.getPointAtLength(a);break}n+=e.length}const o=this._scale;return{x:(i?.x??h)*o+(this.offset?.x??h),y:(i?.y??r)*o+(this.offset?.y??r)}},this._getPointByIndex=t=>{if(!this.raw?.length)throw new Error(a);const e=this.raw[t%this.raw.length];return{x:e.x,y:e.y}},this._getRandomPoint=()=>{if(!this.raw?.length)throw new Error(a);const t=(0,n.Vh)(this.raw);return{x:t.x,y:t.y}},this._getRandomPointByLength=()=>{if(!this._container.actualOptions.polygon)return;if(!this.raw?.length||!this.paths?.length)throw new Error(a);const t=(0,n.Vh)(this.paths),e=Math.floor((0,n.G0)()*t.length)+1,i=t.element.getPointAtLength(e),s=this._scale;return{x:i.x*s+(this.offset?.x??h),y:i.y*s+(this.offset?.y??r)}},this._initRawData=async t=>{const e=this._container.actualOptions.polygon;if(e){if(e.url)this.raw=await this._downloadSvgPath(e.url,t);else if(e.data){const i=e.data;let s;if((0,n.Kg)(i))s=i;else{const t=t=>`<path d="${t}" />`,e=(0,n.cy)(i.path)?i.path.map(t).join(""):t(i.path);s=`<svg ${'xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'} width="${i.size.width}" height="${i.size.height}">${e}</svg>`}this.raw=await this._parseSvgPath(s,t)}this._createPath2D(),this._engine.dispatchEvent("polygonMaskLoaded",{container:this._container})}},this._parseSvgPath=async(t,e)=>{const s=e??!1;if(void 0!==this.paths&&!s)return this.raw;const a=this._container,o=a.actualOptions.polygon;if(!o)return;const h=(new DOMParser).parseFromString(t,"image/svg+xml"),r=h.getElementsByTagName("svg")[0];let l=r.getElementsByTagName("path");l.length||(l=h.getElementsByTagName("path")),this.paths=[];for(let t=0;t<l.length;t++){const e=l.item(t);e&&this.paths.push({element:e,length:e.getTotalLength()})}const y=this._scale;this.dimension.width=parseFloat(r.getAttribute("width")??"0")*y,this.dimension.height=parseFloat(r.getAttribute("height")??"0")*y;const p=o.position??{x:50,y:50},d=a.canvas.size;this.offset={x:d.width*p.x/n.a5-this.dimension.width*c,y:d.height*p.y/n.a5-this.dimension.height*c};const{parsePaths:g}=await Promise.resolve().then(i.bind(i,7246));return g(this.paths,y,this.offset)},this._polygonBounce=(t,e,i)=>{const a=this._container.actualOptions.polygon;if(!this.raw||!a?.enable||"top"!==i)return!1;if("inside"===a.type||"outside"===a.type){let e,i,a;const o=t.getPosition(),h=t.getRadius(),r=1;for(let c=0,l=this.raw.length-r;c<this.raw.length;l=c++){const r=this.raw[c],y=this.raw[l];e=(0,s.v2)(r,y,o);const p=(0,n.vr)(o,e);if([i,a]=[p.dx,p.dy],p.distance<h)return(0,s.I)(r,y,t.velocity),!0}if(e&&void 0!==i&&void 0!==a&&!this._checkInsidePolygon(o)){const i={x:1,y:1},n=2*h,s=-1;return o.x>=e.x&&(i.x=-1),o.y>=e.y&&(i.y=-1),t.position.x=e.x+n*i.x,t.position.y=e.y+n*i.y,t.velocity.mult(s),!0}}else if("inline"===a.type&&t.initialPosition){const e=(0,n.Yf)(t.initialPosition,t.getPosition()),{velocity:i}=t;if(e>this._moveRadius)return i.x=i.y*c-i.x,i.y=i.x*c-i.y,!0}return!1},this._randomPoint=()=>{const t=this._container,e=t.actualOptions.polygon;if(!e)return;let i;if("inline"===e.type)switch(e.inline.arrangement){case"random-point":i=this._getRandomPoint();break;case"random-length":i=this._getRandomPointByLength();break;case"equidistant":i=this._getEquidistantPointByIndex(t.particles.count);break;default:i=this._getPointByIndex(t.particles.count)}else{const e=t.canvas.size;i={x:(0,n.G0)()*e.width,y:(0,n.G0)()*e.height}}return this._checkInsidePolygon(i)?i:this._randomPoint()},this._container=t,this._engine=e,this.dimension={height:0,width:0},this._moveRadius=0,this._scale=1}clickPositionValid(t){const e=this._container.actualOptions.polygon;return!!e?.enable&&"none"!==e.type&&"inline"!==e.type&&this._checkInsidePolygon(t)}draw(t){if(!this.paths?.length)return;const e=this._container.actualOptions.polygon;if(!e?.enable)return;const i=e.draw;if(!i.enable)return;const n=this.raw;for(const e of this.paths){const a=e.path2d;t&&(a&&this.offset?(0,s.Qz)(t,a,i.stroke,this.offset):n&&(0,s.BF)(t,n,i.stroke))}}async init(){const t=this._container,e=t.actualOptions.polygon,i=t.retina.pixelRatio;e&&(this._moveRadius=e.move.radius*i,this._scale=e.scale*i,e.enable&&await this._initRawData())}particleBounce(t,e,i){return this._polygonBounce(t,e,i)}particlePosition(t){const e=this._container.actualOptions.polygon;if(e?.enable&&(this.raw?.length??0)>0)return(0,n.zw)({},t||this._randomPoint())}particlesInitialization(){const t=this._container.actualOptions.polygon;return!(!t?.enable||"inline"!==t.type||"one-per-point"!==t.inline.arrangement&&"per-point"!==t.inline.arrangement)&&(this._drawPoints(),!0)}resize(){const t=this._container,e=t.actualOptions.polygon;if(!e?.enable||"none"===e.type)return;this.redrawTimeout&&clearTimeout(this.redrawTimeout);this.redrawTimeout=window.setTimeout((()=>{(async()=>{await this._initRawData(!0),await t.particles.redraw()})()}),250)}stop(){delete this.raw,delete this.paths}}},7246:(t,e,i)=>{i.d(e,{BF:()=>h,I:()=>y,Qz:()=>r,parsePaths:()=>c,v2:()=>l});var n=i(5540);const s=2,a={min:0,max:1},o=2;function h(t,e,i){const s=(0,n.BN)(i.color);if(!s)return;const a=e[0];t.beginPath(),t.moveTo(a.x,a.y);for(const i of e)t.lineTo(i.x,i.y);t.closePath(),t.strokeStyle=(0,n.xx)(s),t.lineWidth=i.width,t.stroke()}function r(t,e,i,s){const a=1,o=0,h=0,r=1;t.setTransform(a,o,h,r,s.x,s.y);const c=(0,n.BN)(i.color);c&&(t.strokeStyle=(0,n.xx)(c,i.opacity),t.lineWidth=i.width,t.stroke(e),t.resetTransform())}function c(t,e,i){const n=[];for(const s of t){const t=s.element.pathSegList,a=t?.numberOfItems??0,o={x:0,y:0};for(let s=0;s<a;s++){const a=t?.getItem(s),h=window.SVGPathSeg;switch(a?.pathSegType){case h.PATHSEG_MOVETO_ABS:case h.PATHSEG_LINETO_ABS:case h.PATHSEG_CURVETO_CUBIC_ABS:case h.PATHSEG_CURVETO_QUADRATIC_ABS:case h.PATHSEG_ARC_ABS:case h.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:case h.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:{const t=a;o.x=t.x,o.y=t.y;break}case h.PATHSEG_LINETO_HORIZONTAL_ABS:o.x=a.x;break;case h.PATHSEG_LINETO_VERTICAL_ABS:o.y=a.y;break;case h.PATHSEG_LINETO_REL:case h.PATHSEG_MOVETO_REL:case h.PATHSEG_CURVETO_CUBIC_REL:case h.PATHSEG_CURVETO_QUADRATIC_REL:case h.PATHSEG_ARC_REL:case h.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:case h.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:{const t=a;o.x+=t.x,o.y+=t.y;break}case h.PATHSEG_LINETO_HORIZONTAL_REL:o.x+=a.x;break;case h.PATHSEG_LINETO_VERTICAL_REL:o.y+=a.y;break;case h.PATHSEG_UNKNOWN:case h.PATHSEG_CLOSEPATH:continue}n.push({x:o.x*e+i.x,y:o.y*e+i.y})}}return n}function l(t,e,i){const{dx:o,dy:h}=(0,n.vr)(i,t),{dx:r,dy:c}=(0,n.vr)(e,t),l=(o*r+h*c)/(r**s+c**s),y={x:t.x+r*l,y:t.y+c*l,isOnSegment:l>=a.min&&l<=a.max};return l<a.min?(y.x=t.x,y.y=t.y):l>a.max&&(y.x=e.x,y.y=e.y),y}function y(t,e,i){const{dx:s,dy:a}=(0,n.vr)(t,e),h=Math.atan2(a,s),r=n.Mi.create(Math.sin(h),-Math.cos(h)),c=o*(i.x*r.x+i.y*r.y);r.multTo(c),i.subFrom(r)}}}]);