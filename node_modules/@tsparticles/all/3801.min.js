/*! For license information please see 3801.min.js.LICENSE.txt */
(this.webpackChunk_tsparticles_all=this.webpackChunk_tsparticles_all||[]).push([[3801],{3801:(t,e,n)=>{n.d(e,{CanvasMaskInstance:()=>r});var i=n(5540);const o={x:0,y:0};function a(t,e,n,o,a,s){const{height:r,width:l}=e,h=r*l,u=function(t){const e=1,n=0;for(let o=t.length-e;o>=n;o--){const e=Math.floor((0,i.G0)()*o);[t[o],t[e]]=[t[e],t[o]]}return t}(c(h)),g=Math.min(h,t.actualOptions.particles.number.value),f=t.canvas.size;let d=0;const x=f.width*n.x/i.a5-l*o*.5,p=f.height*n.y/i.a5-r*o*.5;for(;d<g&&u.length;){const n=0,i=u.pop()??n,c={x:i%l,y:Math.floor(i/l)},r=e.pixels[c.y][c.x];if(!s(r))continue;const h={x:c.x*o+x,y:c.y*o+p},g={};a.color&&(g.color={value:r}),a.opacity&&(g.opacity={value:r.a}),t.particles.addParticle(h,g),d++}}function s(t,e,n,i=!0){const a=t.getImageData(o.x,o.y,e.width,e.height).data;i&&t.clearRect(o.x,o.y,e.width,e.height);const s=[];for(let t=0;t<a.length;t+=n){const i=t/n,o={x:i%e.width,y:Math.floor(i/e.width)};s[o.y]||(s[o.y]=[]);const c={r:0,g:1,b:2,a:3},r=255;s[o.y][o.x]={r:a[t+c.r],g:a[t+c.g],b:a[t+c.b],a:a[t+c.a]/r}}return{pixels:s,width:Math.min(...s.map((t=>t.length))),height:s.length}}const c=t=>[...Array(t).keys()];class r{constructor(t){this._container=t}async init(){const t=this._container,e=t.actualOptions.canvasMask;if(!e?.enable)return;let n={pixels:[],height:0,width:0};const c=e.pixels.offset;if(e.image){const t=e.image.src;if(!t)return;n=await function(t,e){const n=new Image;n.crossOrigin="Anonymous";const a=new Promise(((t,a)=>{n.onerror=a,n.onload=()=>{const c=document.createElement("canvas");c.width=n.width,c.height=n.height;const r=c.getContext("2d");if(!r)return a(new Error(`${i.dI} Could not get canvas context`));r.drawImage(n,o.x,o.y,n.width,n.height,o.x,o.y,c.width,c.height),t(s(r,c,e))}}));return n.src=t,a}(t,c)}else if(e.text){const t=function(t,e){const n=document.createElement("canvas"),a=n.getContext("2d"),{font:c,text:r,lines:l,color:h}=t;if(!r||!a)return;const u=r.split(l.separator),g=(0,i.Et)(c.size)?`${c.size}px`:c.size,f=[];let d=0,x=0;for(const t of u){a.font=`${c.style??""} ${c.variant??""} ${c.weight??""} ${g} ${c.family}`;const e=a.measureText(t),n={measure:e,text:t,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,width:e.width};d=Math.max(d||0,n.width),x+=n.height+l.spacing,f.push(n)}n.width=d,n.height=x;let p=0;for(const t of f)a.font=`${c.style??""} ${c.variant??""} ${c.weight??""} ${g} ${c.family}`,a.fillStyle=h,a.fillText(t.text,o.x,p+t.measure.actualBoundingBoxAscent),p+=t.height+l.spacing;return s(a,n,e)}(e.text,c);if(!t)return;n=t}else if(e.element??e.selector){const t=e.element??(e.selector&&document.querySelector(e.selector));if(!t)return;const i=t.getContext("2d");if(!i)return;n=s(i,t,c)}a(t,n,e.position,e.scale,e.override,e.pixels.filter)}}}}]);